# DetailPanel ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

## æ¦‚è¦

DetailPanel ã¯ã€ITSMã‚·ã‚¹ãƒ†ãƒ ã®ã‚¯ãƒªãƒƒã‚¯æ™‚å³å´è©³ç´°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚WebUIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä»•æ§˜ã«åŸºã¥ã„ã¦å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

## ä¸»ãªæ©Ÿèƒ½

### ğŸ¯ ã‚³ã‚¢æ©Ÿèƒ½
- **å‹•çš„è©³ç´°è¡¨ç¤º**: ãƒã‚±ãƒƒãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¦ç´ ã®è©³ç´°æƒ…å ±è¡¨ç¤º
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã€ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: WCAG 2.1 AAæº–æ‹ ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: æ»‘ã‚‰ã‹ãªé–‹é–‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **å¤šè¨€èªå¯¾å¿œ**: æ—¥æœ¬èªå„ªå…ˆã€å¤šè¨€èªå±•é–‹å¯èƒ½

### ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (1025px~)**: å³å´å›ºå®šãƒ‘ãƒãƒ«ã€å±•é–‹/ç¸®å°æ©Ÿèƒ½
- **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ (769px~1024px)**: å³å´ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãƒ‘ãƒãƒ«
- **ãƒ¢ãƒã‚¤ãƒ« (~768px)**: ä¸‹éƒ¨ã‹ã‚‰ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒƒãƒ—ãƒ‘ãƒãƒ«

### â™¿ ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ©Ÿèƒ½
- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: Tabã€Escã€Ctrl+F5ç­‰ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
- **ARIAå±æ€§**: é©åˆ‡ãªãƒ­ãƒ¼ãƒ«ã€ãƒ©ãƒ™ãƒ«ã€çŠ¶æ…‹è¡¨ç¤º
- **ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†**: ãƒ‘ãƒãƒ«é–‹é–‰æ™‚ã®é©åˆ‡ãªãƒ•ã‚©ãƒ¼ã‚«ã‚¹åˆ¶å¾¡
- **ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ**: æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±éšå±¤

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹

```tsx
import React from 'react'
import { useDetailPanelContext } from '../layout/Layout'

const ExampleComponent: React.FC = () => {
  const { openDetailPanel } = useDetailPanelContext()

  const handleItemClick = (item: any) => {
    const detailItem = {
      id: item.id,
      type: 'ticket', // 'ticket' | 'user' | 'dashboard' | 'incident' | 'problem'
      title: item.title,
      subtitle: `#${item.id} â€¢ ${item.category}`,
      data: item, // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
      metadata: {
        lastViewed: new Date().toISOString(),
        source: 'example-component',
      },
    }

    openDetailPanel(detailItem, 'right')
  }

  return (
    <div onClick={() => handleItemClick(someItem)}>
      ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°ã‚’è¡¨ç¤º
    </div>
  )
}
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ä½¿ç”¨

```tsx
import { useDetailPanel } from '../hooks/useDetailPanel'

const CustomComponent: React.FC = () => {
  const {
    detailPanelState,
    openDetailPanel,
    closeDetailPanel,
    updateDetailPanelItem,
    isDetailPanelOpen,
    currentItem,
  } = useDetailPanel()

  // ã‚«ã‚¹ã‚¿ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
}
```

## API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### DetailPanelProps

```typescript
interface DetailPanelProps {
  isOpen: boolean                    // ãƒ‘ãƒãƒ«ã®é–‹é–‰çŠ¶æ…‹
  item: DetailPanelItem | null       // è¡¨ç¤ºã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
  onClose: () => void               // é–‰ã˜ã‚‹æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
  position?: 'right' | 'bottom'     // è¡¨ç¤ºä½ç½®ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 'right'ï¼‰
  width?: number | string           // ãƒ‘ãƒãƒ«å¹…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 480pxï¼‰
  maxWidth?: number | string        // æœ€å¤§å¹…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 800pxï¼‰
  minWidth?: number | string        // æœ€å°å¹…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 320pxï¼‰
}
```

### DetailPanelItem

```typescript
interface DetailPanelItem {
  id: string                        // ä¸€æ„ã®ID
  type: 'ticket' | 'user' | 'dashboard' | 'incident' | 'problem'
  title: string                     // è¡¨ç¤ºã‚¿ã‚¤ãƒˆãƒ«
  subtitle?: string                 // ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«
  data: any                        // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿
  metadata?: Record<string, any>   // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
}
```

### useDetailPanelContext

```typescript
interface DetailPanelContextType {
  openDetailPanel: (item: DetailPanelItem, position?: 'right' | 'bottom') => void
  closeDetailPanel: () => void
  updateDetailPanelItem: (item: DetailPanelItem) => void
  isDetailPanelOpen: boolean
  currentItem: DetailPanelItem | null
}
```

## ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

| ã‚­ãƒ¼ | æ©Ÿèƒ½ |
|------|------|
| `Esc` | ãƒ‘ãƒãƒ«ã‚’é–‰ã˜ã‚‹ |
| `Ctrl + F5` | æƒ…å ±ã‚’æ›´æ–° |
| `Ctrl + Alt + E` | ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ |
| `Tab` | æ¬¡ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ |
| `Shift + Tab` | å‰ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ |

## ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—åˆ¥è¡¨ç¤º

### ãƒã‚±ãƒƒãƒˆè©³ç´°
- **æ¦‚è¦ã‚¿ãƒ–**: åŸºæœ¬æƒ…å ±ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€æ‹…å½“è€…ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- **å±¥æ­´ã‚¿ãƒ–**: å¤‰æ›´å±¥æ­´ã®æ™‚ç³»åˆ—è¡¨ç¤º
- **ã‚³ãƒ¡ãƒ³ãƒˆã‚¿ãƒ–**: ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ã€å†…éƒ¨/å¤–éƒ¨ãƒ•ãƒ©ã‚°
- **é–¢é€£æƒ…å ±ã‚¿ãƒ–**: æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã€é–¢é€£ãƒã‚±ãƒƒãƒˆ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«**: åŸºæœ¬æƒ…å ±ã€ãƒ­ãƒ¼ãƒ«ã€éƒ¨ç½²
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ**: å‡¦ç†ãƒã‚±ãƒƒãƒˆæ•°ã€è§£æ±ºç‡ã€SLAéµå®ˆç‡
- **æ‹…å½“ãƒã‚±ãƒƒãƒˆ**: ç¾åœ¨ã®æ‹…å½“ãƒã‚±ãƒƒãƒˆä¸€è¦§

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¦ç´ 
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹è©³ç´°**: KPIæŒ‡æ¨™ã®è©³ç´°åˆ†æ
- **ãƒãƒ£ãƒ¼ãƒˆè©³ç´°**: ã‚°ãƒ©ãƒ•ã®è©³ç´°ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º

## ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ æº–æ‹ 
- **ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ**: ITSMãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã®ä½¿ç”¨
- **ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£**: Material-UI Typographyè¦æº–
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: Material-UIã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³è¨­å®š
- **ã‚·ãƒ£ãƒ‰ã‚¦**: æ®µéšçš„ãªã‚¨ãƒ¬ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªè¦ç´ 
```scss
// ãƒ‘ãƒãƒ«å¹…ã®èª¿æ•´
.detail-panel {
  --panel-width-desktop: 480px;
  --panel-width-tablet: 400px;
  --panel-width-mobile: 100%;
}

// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦ã®èª¿æ•´
.detail-panel-transition {
  --animation-duration: 300ms;
  --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹æœ€é©åŒ–
- **React.memo**: ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é˜²æ­¢
- **é…å»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: ãƒ‘ãƒãƒ«é–‹é–‰æ™‚ã®æ®µéšçš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- **ä»®æƒ³åŒ–**: å¤§é‡ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆè¡¨ç¤ºæ™‚ã®ä»®æƒ³åŒ–
- **ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒª**: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®é©åˆ‡ãªå‡¦ç†

### æ¨å¥¨äº‹é …
- å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã¯ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¾ãŸã¯ä»®æƒ³åŒ–ã‚’ä½¿ç”¨
- ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¯é©åˆ‡ãªã‚µã‚¤ã‚ºã«æœ€é©åŒ–
- APIå‘¼ã³å‡ºã—ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã‚’æ´»ç”¨

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### ãƒ‘ãƒãƒ«ãŒè¡¨ç¤ºã•ã‚Œãªã„
```typescript
// Layout ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
const { openDetailPanel } = useDetailPanelContext()
```

#### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã—ãªã„
```typescript
// Material-UIã®ãƒ†ãƒ¼ãƒãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
import { ThemeProvider } from '@mui/material'
```

#### ãƒ¢ãƒã‚¤ãƒ«ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ããªã„
```typescript
// disableScrollLock ã®è¨­å®šç¢ºèª
ModalProps={{
  disableScrollLock: true,
}}
```

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

```typescript
// ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®è¡¨ç¤º
useEffect(() => {
  console.log('DetailPanel State:', detailPanelState)
}, [detailPanelState])
```

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### Phase 2 æ©Ÿèƒ½
- **ãƒãƒ«ãƒãƒ‘ãƒãƒ«å¯¾å¿œ**: è¤‡æ•°ãƒ‘ãƒãƒ«ã®åŒæ™‚è¡¨ç¤º
- **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: ãƒ‘ãƒãƒ«ä½ç½®ã®èª¿æ•´
- **ãŠæ°—ã«å…¥ã‚Š**: ã‚ˆãè¦‹ã‚‹é …ç›®ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯
- **æ¤œç´¢æ©Ÿèƒ½**: ãƒ‘ãƒãƒ«å†…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ¤œç´¢

### æŠ€è¡“çš„æ”¹å–„
- **ä»®æƒ³åŒ–å¼·åŒ–**: React Windowå°å…¥ã«ã‚ˆã‚‹å¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ
- **PWAå¯¾å¿œ**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¡¨ç¤º
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: è¡¨ç¤ºé€Ÿåº¦ã®è¨ˆæ¸¬ã¨æœ€é©åŒ–

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [WebUIè©³ç´°ä»•æ§˜æ›¸](../../../docs/WebUI/WebUIè©³ç´°ä»•æ§˜æ›¸.md)
- [WebUIæ©Ÿèƒ½èª¬æ˜æ›¸](../../../docs/WebUI/WebUIæ©Ÿèƒ½èª¬æ˜æ›¸.md)
- [ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](./AccessibilityHelper.md)
- [ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æŒ‡é‡](./ResponsiveContainer.md)

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ ITSMçµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ä¸€éƒ¨ã¨ã—ã¦é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚