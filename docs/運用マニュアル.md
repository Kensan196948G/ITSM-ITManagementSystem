# ITSMã‚·ã‚¹ãƒ†ãƒ  é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

## 1. ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨æ¦‚è¦

### 1.1 é‹ç”¨ä½“åˆ¶

| å½¹å‰² | è²¬å‹™ | å¯¾å¿œæ™‚é–“ |
|------|------|----------|
| ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… | ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ç®¡ç†ã€è¨­å®šå¤‰æ›´ | å¹³æ—¥ 9:00-18:00 |
| é‹ç”¨ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ | æ—¥å¸¸ç›£è¦–ã€ä¸€æ¬¡å¯¾å¿œ | 24æ™‚é–“365æ—¥ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†è€… | DBé‹ç”¨ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç®¡ç† | å¹³æ—¥ 9:00-18:00 |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†è€… | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–ã€ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ | 24æ™‚é–“365æ—¥ |
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¿å®ˆ | ãƒã‚°ä¿®æ­£ã€æ©Ÿèƒ½æ”¹å–„ | å¹³æ—¥ 9:00-18:00 |

### 1.2 ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«ç›®æ¨™

| é …ç›® | ç›®æ¨™å€¤ |
|------|--------|
| ã‚·ã‚¹ãƒ†ãƒ å¯ç”¨æ€§ | 99.9%ï¼ˆå¹´é–“ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ 8.76æ™‚é–“ä»¥å†…ï¼‰ |
| å¿œç­”æ™‚é–“ | ç”»é¢è¡¨ç¤º3ç§’ä»¥å†…ã€APIå¿œç­”200msä»¥å†… |
| éšœå®³å¾©æ—§æ™‚é–“ | Critical: 2æ™‚é–“ä»¥å†…ã€High: 4æ™‚é–“ä»¥å†… |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆåŠŸç‡ | 100% |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ | åˆå‹•15åˆ†ä»¥å†… |

## 2. æ—¥å¸¸é‹ç”¨ä½œæ¥­

### 2.1 ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ãƒ»åœæ­¢æ‰‹é †

#### ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•æ‰‹é †

```bash
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
sudo systemctl start postgresql
sudo systemctl start redis

# 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
sudo systemctl start rabbitmq-server

# 3. æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³èµ·å‹•
sudo systemctl start elasticsearch

# 4. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
cd /opt/itsm-system
docker-compose up -d

# 5. èµ·å‹•ç¢ºèª
./scripts/health-check.sh
```

#### ã‚·ã‚¹ãƒ†ãƒ åœæ­¢æ‰‹é †

```bash
# 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
cd /opt/itsm-system
docker-compose down

# 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼åœæ­¢
sudo systemctl stop rabbitmq-server

# 3. æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³åœæ­¢
sudo systemctl stop elasticsearch

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
sudo systemctl stop redis
sudo systemctl stop postgresql

# 5. åœæ­¢ç¢ºèª
./scripts/status-check.sh
```

### 2.2 ç›£è¦–é …ç›®ã¨é–¾å€¤

#### ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–

| ç›£è¦–é …ç›® | è­¦å‘Šé–¾å€¤ | å±é™ºé–¾å€¤ | ç›£è¦–é–“éš” |
|----------|----------|----------|----------|
| CPUä½¿ç”¨ç‡ | 70% | 85% | 1åˆ† |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ | 80% | 90% | 1åˆ† |
| ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡ | 70% | 85% | 5åˆ† |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¸¯åŸŸ | 70% | 85% | 1åˆ† |
| DBæ¥ç¶šæ•° | 80% | 90% | 1åˆ† |

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç›£è¦–

```yaml
# Prometheusç›£è¦–è¨­å®š
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'itsm-backend'
    static_configs:
      - targets: ['backend:8000']
    metrics_path: '/metrics'
  
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']
  
  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']
```

### 2.3 ãƒ­ã‚°ç®¡ç†

#### ãƒ­ã‚°ç¨®åˆ¥ã¨ä¿å­˜æœŸé–“

| ãƒ­ã‚°ç¨®åˆ¥ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | ä¿å­˜æœŸé–“ | ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ |
|----------|-------------|----------|---------------|
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚° | /var/log/itsm/app.log | 90æ—¥ | æ—¥æ¬¡ |
| ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚° | /var/log/itsm/access.log | 365æ—¥ | æ—¥æ¬¡ |
| ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° | /var/log/itsm/error.log | 180æ—¥ | æ—¥æ¬¡ |
| ç›£æŸ»ãƒ­ã‚° | /var/log/itsm/audit.log | 7å¹´ | æœˆæ¬¡ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚° | /var/log/itsm/security.log | 3å¹´ | é€±æ¬¡ |

#### ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

```bash
# /etc/logrotate.d/itsm
/var/log/itsm/*.log {
    daily
    missingok
    rotate 90
    compress
    delaycompress
    notifempty
    create 0640 itsm itsm
    sharedscripts
    postrotate
        docker exec itsm-backend kill -USR1 1
    endscript
}
```

## 3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã‚¢

### 3.1 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨ˆç”»

| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¯¾è±¡ | ç¨®åˆ¥ | é »åº¦ | ä¿å­˜æœŸé–“ | ä¿å­˜å…ˆ |
|----------------|------|------|----------|--------|
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒ•ãƒ«ï¼‰ | ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | é€±æ¬¡ï¼ˆæ—¥æ›œæ—¥ï¼‰ | 3ãƒ¶æœˆ | S3/Glacier |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå·®åˆ†ï¼‰ | å·®åˆ†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | æ—¥æ¬¡ | 1ãƒ¶æœˆ | S3 |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ | ãƒ­ã‚°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | 15åˆ†æ¯ | 7æ—¥ | S3 |
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | æ—¥æ¬¡ | 7æ—¥ | S3 |
| è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« | ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | å¤‰æ›´æ™‚ | ç„¡æœŸé™ | Git/S3 |

### 3.2 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ‰‹é †

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# /opt/itsm-system/scripts/backup-db.sh

# è¨­å®š
BACKUP_DIR="/backup/postgres"
S3_BUCKET="s3://itsm-backup/postgres"
DATE=$(date +%Y%m%d_%H%M%S)
RETENTION_DAYS=30

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ
echo "Starting database backup at $(date)"

# ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆæ—¥æ›œæ—¥ï¼‰
if [ $(date +%w) -eq 0 ]; then
    BACKUP_FILE="$BACKUP_DIR/full_backup_$DATE.sql.gz"
    pg_dump -h localhost -U itsm_user -d itsm_db | gzip > $BACKUP_FILE
    
    # S3ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    aws s3 cp $BACKUP_FILE $S3_BUCKET/full/
    
    # å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤
    find $BACKUP_DIR -name "full_backup_*.sql.gz" -mtime +90 -delete
else
    # å·®åˆ†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    BACKUP_FILE="$BACKUP_DIR/diff_backup_$DATE.sql.gz"
    pg_dump -h localhost -U itsm_user -d itsm_db --data-only | gzip > $BACKUP_FILE
    
    # S3ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    aws s3 cp $BACKUP_FILE $S3_BUCKET/diff/
    
    # å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤
    find $BACKUP_DIR -name "diff_backup_*.sql.gz" -mtime +$RETENTION_DAYS -delete
fi

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¤œè¨¼
if [ $? -eq 0 ]; then
    echo "Backup completed successfully"
    # æˆåŠŸé€šçŸ¥
    curl -X POST $SLACK_WEBHOOK -d "{\"text\":\"Database backup completed: $BACKUP_FILE\"}"
else
    echo "Backup failed"
    # ã‚¨ãƒ©ãƒ¼é€šçŸ¥
    curl -X POST $SLACK_WEBHOOK -d "{\"text\":\"@channel Database backup FAILED!\"}"
    exit 1
fi
```

### 3.3 ãƒªã‚¹ãƒˆã‚¢æ‰‹é †

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚¹ãƒˆã‚¢

```bash
#!/bin/bash
# /opt/itsm-system/scripts/restore-db.sh

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯
if [ $# -ne 1 ]; then
    echo "Usage: $0 <backup_file>"
    exit 1
fi

BACKUP_FILE=$1

# 1. ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
echo "Stopping application services..."
docker-compose stop

# 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’åˆ‡æ–­
psql -U postgres -c "SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE datname = 'itsm_db' AND pid <> pg_backend_pid();"

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆç¾çŠ¶ä¿å­˜ï¼‰
pg_dump -U postgres itsm_db > /backup/before_restore_$(date +%Y%m%d_%H%M%S).sql

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å‰Šé™¤ã¨å†ä½œæˆ
psql -U postgres -c "DROP DATABASE IF EXISTS itsm_db;"
psql -U postgres -c "CREATE DATABASE itsm_db OWNER itsm_user;"

# 5. ãƒªã‚¹ãƒˆã‚¢å®Ÿè¡Œ
echo "Restoring database from $BACKUP_FILE..."
if [[ $BACKUP_FILE == *.gz ]]; then
    gunzip -c $BACKUP_FILE | psql -U itsm_user -d itsm_db
else
    psql -U itsm_user -d itsm_db < $BACKUP_FILE
fi

# 6. æ¨©é™è¨­å®š
psql -U postgres -d itsm_db -c "GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO itsm_user;"
psql -U postgres -d itsm_db -c "GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO itsm_user;"

# 7. ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
echo "Verifying restored data..."
psql -U itsm_user -d itsm_db -c "SELECT COUNT(*) FROM incidents;"

# 8. ã‚µãƒ¼ãƒ“ã‚¹å†é–‹
echo "Starting application services..."
docker-compose up -d

# 9. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
sleep 30
./scripts/health-check.sh

echo "Restore completed at $(date)"
```

## 4. éšœå®³å¯¾å¿œ

### 4.1 éšœå®³ãƒ¬ãƒ™ãƒ«å®šç¾©

| ãƒ¬ãƒ™ãƒ« | èª¬æ˜ | å½±éŸ¿ç¯„å›² | å¯¾å¿œæ™‚é–“ |
|--------|------|----------|----------|
| Critical | ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“åœæ­¢ | å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ | å³æ™‚å¯¾å¿œã€2æ™‚é–“ä»¥å†…å¾©æ—§ |
| High | ä¸»è¦æ©Ÿèƒ½åœæ­¢ | å¤šæ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ | 30åˆ†ä»¥å†…å¯¾å¿œã€4æ™‚é–“ä»¥å†…å¾©æ—§ |
| Medium | ä¸€éƒ¨æ©Ÿèƒ½åœæ­¢ | ä¸€éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ | 2æ™‚é–“ä»¥å†…å¯¾å¿œã€8æ™‚é–“ä»¥å†…å¾©æ—§ |
| Low | è»½å¾®ãªä¸å…·åˆ | é™å®šçš„ | ç¿Œå–¶æ¥­æ—¥å¯¾å¿œ |

### 4.2 éšœå®³å¯¾å¿œãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[éšœå®³æ¤œçŸ¥] --> B{è‡ªå‹•å¾©æ—§å¯èƒ½?}
    B -->|Yes| C[è‡ªå‹•å¾©æ—§å®Ÿè¡Œ]
    B -->|No| D[éšœå®³ãƒ¬ãƒ™ãƒ«åˆ¤å®š]
    C --> E{å¾©æ—§æˆåŠŸ?}
    E -->|Yes| F[å¾©æ—§å®Œäº†é€šçŸ¥]
    E -->|No| D
    D --> G[æ‹…å½“è€…å‘¼ã³å‡ºã—]
    G --> H[åˆæœŸèª¿æŸ»]
    H --> I[åŸå› ç‰¹å®š]
    I --> J[å¾©æ—§ä½œæ¥­]
    J --> K[å‹•ä½œç¢ºèª]
    K --> L[æ ¹æœ¬åŸå› åˆ†æ]
    L --> M[æ’ä¹…å¯¾ç­–å®Ÿæ–½]
```

### 4.3 ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚ˆãã‚ã‚‹éšœå®³ã¨å¯¾å‡¦æ³•

##### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# ç—‡çŠ¶: "could not connect to database"

# 1. PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ç¢ºèª
sudo systemctl status postgresql

# 2. æ¥ç¶šæ•°ç¢ºèª
psql -U postgres -c "SELECT count(*) FROM pg_stat_activity;"

# 3. æ¥ç¶šæ•°ä¸Šé™ã«é”ã—ã¦ã„ã‚‹å ´åˆ
psql -U postgres -c "ALTER SYSTEM SET max_connections = 500;"
sudo systemctl restart postgresql

# 4. ãƒ­ã‚°ç¢ºèª
tail -f /var/log/postgresql/postgresql-15-main.log
```

##### ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼

```bash
# ç—‡çŠ¶: OutOfMemoryError

# 1. ãƒ¡ãƒ¢ãƒªä½¿ç”¨çŠ¶æ³ç¢ºèª
free -h
docker stats

# 2. ä¸è¦ãªãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | sort -k 4 -r | head -20

# 3. Dockerã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¡ãƒ¢ãƒªåˆ¶é™èª¿æ•´
docker-compose down
# docker-compose.ymlã®memory limitã‚’èª¿æ•´
docker-compose up -d

# 4. ã‚¹ãƒ¯ãƒƒãƒ—é ˜åŸŸè¿½åŠ ï¼ˆç·Šæ€¥æ™‚ï¼‰
sudo dd if=/dev/zero of=/swapfile bs=1G count=4
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

##### ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³

```bash
# ç—‡çŠ¶: "No space left on device"

# 1. ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨çŠ¶æ³ç¢ºèª
df -h
du -sh /* | sort -rh | head -20

# 2. ä¸è¦ãªãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
find /var/log/itsm -name "*.log" -mtime +30 -delete
docker system prune -a

# 3. å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤
find /backup -name "*.gz" -mtime +30 -delete

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹VACUUMå®Ÿè¡Œ
psql -U itsm_user -d itsm_db -c "VACUUM FULL;"
```

## 5. å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### 5.1 æ—¥æ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```bash
#!/bin/bash
# /opt/itsm-system/scripts/daily-maintenance.sh

echo "=== Daily Maintenance Started at $(date) ==="

# 1. ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
/usr/sbin/logrotate -f /etc/logrotate.d/itsm

# 2. ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
find /tmp -name "itsm_*" -mtime +1 -delete
find /var/tmp -name "upload_*" -mtime +1 -delete

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±è¨ˆæƒ…å ±æ›´æ–°
psql -U itsm_user -d itsm_db -c "ANALYZE;"

# 4. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ï¼ˆå¤ã„ã‚¨ãƒ³ãƒˆãƒªï¼‰
redis-cli --scan --pattern "cache:*" | while read key; do
    ttl=$(redis-cli ttl "$key")
    if [ $ttl -lt 0 ]; then
        redis-cli del "$key"
    fi
done

# 5. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
./health-check.sh

echo "=== Daily Maintenance Completed at $(date) ==="
```

### 5.2 é€±æ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```bash
#!/bin/bash
# /opt/itsm-system/scripts/weekly-maintenance.sh

echo "=== Weekly Maintenance Started at $(date) ==="

# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
./backup-db.sh

# 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç¢ºèª
apt update
apt list --upgradable

# 3. Docker ã‚¤ãƒ¡ãƒ¼ã‚¸æ›´æ–°ç¢ºèª
docker images | grep itsm

# 4. ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ãƒ¬ãƒãƒ¼ãƒˆ
df -h > /tmp/disk_usage_$(date +%Y%m%d).txt
du -sh /var/log/* >> /tmp/disk_usage_$(date +%Y%m%d).txt

# 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
./generate-performance-report.sh

# 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
./security-scan.sh

echo "=== Weekly Maintenance Completed at $(date) ==="
```

### 5.3 æœˆæ¬¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

| ä½œæ¥­é …ç›® | å®Ÿæ–½å†…å®¹ | æ‰€è¦æ™‚é–“ |
|----------|----------|----------|
| ãƒ‘ãƒƒãƒé©ç”¨ | OSã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒ | 2æ™‚é–“ |
| è¨¼æ˜æ›¸æ›´æ–°ç¢ºèª | SSLè¨¼æ˜æ›¸ã®æœ‰åŠ¹æœŸé™ç¢ºèª | 30åˆ† |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æ£šå¸ã— | ä¸è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å‰Šé™¤ | 1æ™‚é–“ |
| å®¹é‡è¨ˆç”»è¦‹ç›´ã— | ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨å‚¾å‘åˆ†æ | 1æ™‚é–“ |
| DRè¨“ç·´ | éšœå®³å¾©æ—§æ‰‹é †ã®ç¢ºèª | 4æ™‚é–“ |

## 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

### 6.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

#### PostgreSQLè¨­å®šæœ€é©åŒ–

```sql
-- postgresql.conf ã®æ¨å¥¨è¨­å®š

-- ãƒ¡ãƒ¢ãƒªé–¢é€£
shared_buffers = 8GB                    # ç‰©ç†ãƒ¡ãƒ¢ãƒªã®25%
effective_cache_size = 24GB             # ç‰©ç†ãƒ¡ãƒ¢ãƒªã®75%
work_mem = 64MB                         # ã‚½ãƒ¼ãƒˆãƒ»é›†è¨ˆç”¨
maintenance_work_mem = 2GB              # VACUUM, CREATE INDEXç”¨

-- æ¥ç¶šé–¢é€£
max_connections = 500
max_prepared_transactions = 100

-- ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆé–¢é€£
checkpoint_timeout = 15min
checkpoint_completion_target = 0.9
max_wal_size = 4GB
min_wal_size = 1GB

-- ãƒ­ã‚°é–¢é€£
log_min_duration_statement = 1000       # 1ç§’ä»¥ä¸Šã®ã‚¯ã‚¨ãƒªã‚’ãƒ­ã‚°
log_checkpoints = on
log_connections = on
log_disconnections = on
log_lock_waits = on
log_temp_files = 0

-- è‡ªå‹•VACUUM
autovacuum = on
autovacuum_max_workers = 4
autovacuum_naptime = 30s
```

#### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–

```sql
-- æœªä½¿ç”¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ¤œå‡º
SELECT 
    schemaname,
    tablename,
    indexname,
    idx_scan,
    idx_tup_read,
    idx_tup_fetch
FROM pg_stat_user_indexes
WHERE idx_scan = 0
AND schemaname NOT IN ('pg_catalog', 'information_schema')
ORDER BY schemaname, tablename;

-- æ–­ç‰‡åŒ–ã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å†æ§‹ç¯‰
REINDEX TABLE CONCURRENTLY incidents;
REINDEX TABLE CONCURRENTLY incident_histories;

-- æ–°è¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å€™è£œã®æ¤œå‡º
SELECT 
    schemaname,
    tablename,
    attname,
    n_distinct,
    correlation
FROM pg_stats
WHERE n_distinct > 100
AND correlation < 0.1
ORDER BY n_distinct DESC;
```

### 6.2 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

#### Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–

```python
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®å®Ÿè£…
class CacheStrategy:
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœŸé–“è¨­å®š
    CACHE_DURATIONS = {
        'user_profile': 3600,        # 1æ™‚é–“
        'team_list': 86400,          # 24æ™‚é–“
        'category_list': 604800,     # 7æ—¥é–“
        'incident_stats': 300,       # 5åˆ†
        'dashboard_data': 60,        # 1åˆ†
    }
    
    @staticmethod
    def get_cache_key(resource_type, identifier):
        return f"cache:{resource_type}:{identifier}"
    
    @staticmethod
    def should_cache(resource_type):
        # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã¹ãã§ãªã„ãƒªã‚½ãƒ¼ã‚¹
        no_cache_resources = ['audit_log', 'real_time_status']
        return resource_type not in no_cache_resources
```

#### ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«è¨­å®š

```python
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«
from sqlalchemy.pool import QueuePool

engine = create_engine(
    DATABASE_URL,
    poolclass=QueuePool,
    pool_size=20,          # å¸¸æ™‚æ¥ç¶šæ•°
    max_overflow=40,       # æœ€å¤§è¿½åŠ æ¥ç¶šæ•°
    pool_timeout=30,       # æ¥ç¶šå¾…æ©Ÿã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
    pool_recycle=3600,     # æ¥ç¶šãƒªã‚µã‚¤ã‚¯ãƒ«æ™‚é–“
    pool_pre_ping=True,    # æ¥ç¶šå‰ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
)

# Redisæ¥ç¶šãƒ—ãƒ¼ãƒ«
import redis

redis_pool = redis.ConnectionPool(
    host='localhost',
    port=6379,
    max_connections=100,
    decode_responses=True
)
redis_client = redis.Redis(connection_pool=redis_pool)
```

## 7. ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

### 7.1 ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

#### Grafanaãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­å®š

```json
{
  "dashboard": {
    "title": "ITSM System Monitoring",
    "panels": [
      {
        "title": "System Overview",
        "targets": [
          {
            "expr": "up{job='itsm-backend'}",
            "legendFormat": "Backend Status"
          },
          {
            "expr": "rate(http_requests_total[5m])",
            "legendFormat": "Request Rate"
          }
        ]
      },
      {
        "title": "Database Performance",
        "targets": [
          {
            "expr": "pg_stat_database_xact_commit{datname='itsm_db'}",
            "legendFormat": "Transactions/sec"
          },
          {
            "expr": "pg_stat_database_blks_hit{datname='itsm_db'} / (pg_stat_database_blks_hit{datname='itsm_db'} + pg_stat_database_blks_read{datname='itsm_db'})",
            "legendFormat": "Cache Hit Ratio"
          }
        ]
      }
    ]
  }
}
```

### 7.2 ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

#### Prometheusã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«

```yaml
# /etc/prometheus/alerts/itsm_alerts.yml
groups:
  - name: itsm_critical
    interval: 30s
    rules:
      - alert: SystemDown
        expr: up{job="itsm-backend"} == 0
        for: 2m
        labels:
          severity: critical
          team: ops
        annotations:
          summary: "ITSM Backend is down"
          description: "Backend service has been down for more than 2 minutes"
      
      - alert: HighCPUUsage
        expr: rate(process_cpu_seconds_total[5m]) > 0.8
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage detected"
          description: "CPU usage is above 80% for 5 minutes"
      
      - alert: DatabaseConnectionPoolExhausted
        expr: pg_stat_database_numbackends{datname="itsm_db"} / pg_settings_max_connections > 0.9
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "Database connection pool nearly exhausted"
          description: "More than 90% of database connections are in use"
```

### 7.3 é€šçŸ¥è¨­å®š

#### Slacké€šçŸ¥è¨­å®š

```python
# /opt/itsm-system/scripts/alert_notifier.py
import requests
import json

class AlertNotifier:
    def __init__(self, webhook_url):
        self.webhook_url = webhook_url
    
    def send_alert(self, alert_data):
        severity_emoji = {
            'critical': 'ğŸš¨',
            'warning': 'âš ï¸',
            'info': 'â„¹ï¸'
        }
        
        message = {
            "text": f"{severity_emoji.get(alert_data['severity'], 'ğŸ“¢')} *{alert_data['title']}*",
            "attachments": [
                {
                    "color": self.get_color(alert_data['severity']),
                    "fields": [
                        {
                            "title": "Description",
                            "value": alert_data['description'],
                            "short": False
                        },
                        {
                            "title": "Time",
                            "value": alert_data['timestamp'],
                            "short": True
                        },
                        {
                            "title": "Severity",
                            "value": alert_data['severity'],
                            "short": True
                        }
                    ]
                }
            ]
        }
        
        response = requests.post(self.webhook_url, json=message)
        return response.status_code == 200
    
    def get_color(self, severity):
        colors = {
            'critical': '#FF0000',
            'warning': '#FFA500',
            'info': '#0000FF'
        }
        return colors.get(severity, '#808080')
```

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é‹ç”¨

### 8.1 ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†

```bash
#!/bin/bash
# /opt/itsm-system/scripts/user-audit.sh

echo "=== User Account Audit Report ==="
echo "Generated at: $(date)"

# 1. é•·æœŸé–“æœªä½¿ç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
echo -e "\n## Inactive Accounts (>90 days):"
psql -U itsm_user -d itsm_db -t -c "
SELECT email, last_login_at 
FROM users 
WHERE last_login_at < CURRENT_DATE - INTERVAL '90 days'
AND is_active = true
ORDER BY last_login_at;"

# 2. ç®¡ç†è€…æ¨©é™ä¿æœ‰è€…
echo -e "\n## Admin Users:"
psql -U itsm_user -d itsm_db -t -c "
SELECT u.email, r.name as role 
FROM users u
JOIN user_roles ur ON u.id = ur.user_id
JOIN roles r ON ur.role_id = r.id
WHERE r.name IN ('admin', 'system_admin')
ORDER BY u.email;"

# 3. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æœŸé™åˆ‡ã‚Œé–“è¿‘
echo -e "\n## Password Expiry Warning:"
psql -U itsm_user -d itsm_db -t -c "
SELECT email, password_changed_at 
FROM users 
WHERE password_changed_at < CURRENT_DATE - INTERVAL '75 days'
AND is_active = true
ORDER BY password_changed_at;"
```

### 8.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»

#### å®šæœŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

```bash
#!/bin/bash
# /opt/itsm-system/scripts/security-check.sh

echo "=== Security Audit Checklist ==="
echo "Date: $(date)"

# 1. SSLè¨¼æ˜æ›¸æœ‰åŠ¹æœŸé™ç¢ºèª
echo -e "\n[CHECK] SSL Certificate Expiry:"
echo | openssl s_client -servername itsm.example.com -connect itsm.example.com:443 2>/dev/null | openssl x509 -noout -dates

# 2. é–‹æ”¾ãƒãƒ¼ãƒˆç¢ºèª
echo -e "\n[CHECK] Open Ports:"
netstat -tuln | grep LISTEN

# 3. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šç¢ºèª
echo -e "\n[CHECK] Firewall Rules:"
iptables -L -n -v

# 4. ä¸å¯©ãªãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
echo -e "\n[CHECK] Running Processes:"
ps aux | grep -v "root\|itsm\|postgres\|redis" | grep -v grep

# 5. ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´ç¢ºèª
echo -e "\n[CHECK] Recent Logins:"
last -n 20

# 6. sudoå®Ÿè¡Œå±¥æ­´
echo -e "\n[CHECK] Recent sudo Commands:"
grep sudo /var/log/auth.log | tail -20
```

### 8.3 ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œè¨˜éŒ²

```markdown
## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œè¨˜éŒ²ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæƒ…å ±
- **ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆID**: SEC-YYYYMMDD-XXX
- **ç™ºç”Ÿæ—¥æ™‚**: YYYY-MM-DD HH:MM:SS
- **æ¤œçŸ¥æ–¹æ³•**: [è‡ªå‹•æ¤œçŸ¥/ãƒ¦ãƒ¼ã‚¶ãƒ¼å ±å‘Š/å®šæœŸç›£æŸ»]
- **é‡è¦åº¦**: [Critical/High/Medium/Low]

### ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè©³ç´°
- **æ¦‚è¦**: 
- **å½±éŸ¿ç¯„å›²**: 
- **å½±éŸ¿ã‚’å—ã‘ãŸã‚·ã‚¹ãƒ†ãƒ **: 

### å¯¾å¿œè¨˜éŒ²
| æ™‚åˆ» | å®Ÿæ–½å†…å®¹ | æ‹…å½“è€… |
|------|----------|--------|
| HH:MM | åˆæœŸå¯¾å¿œé–‹å§‹ | |
| HH:MM | å½±éŸ¿ç¯„å›²ç‰¹å®š | |
| HH:MM | å¯¾ç­–å®Ÿæ–½ | |
| HH:MM | å¾©æ—§ç¢ºèª | |

### æ ¹æœ¬åŸå› 
- **åŸå› **: 
- **ãªãœç™ºç”Ÿã—ãŸã‹**: 

### æ’ä¹…å¯¾ç­–
- **å®Ÿæ–½ã™ã‚‹å¯¾ç­–**: 
- **å®Ÿæ–½äºˆå®šæ—¥**: 
- **åŠ¹æœæ¸¬å®šæ–¹æ³•**: 

### æ•™è¨“
- **å­¦ã‚“ã ã“ã¨**: 
- **æ”¹å–„ç‚¹**: 
```

## 9. ç½å®³å¾©æ—§è¨ˆç”»

### 9.1 å¾©æ—§å„ªå…ˆé †ä½

| å„ªå…ˆåº¦ | ã‚·ã‚¹ãƒ†ãƒ /æ©Ÿèƒ½ | RTO | RPO |
|--------|--------------|-----|-----|
| 1 | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | 1æ™‚é–“ | 15åˆ† |
| 2 | èªè¨¼ã‚·ã‚¹ãƒ†ãƒ  | 2æ™‚é–“ | 1æ™‚é–“ |
| 3 | ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç† | 2æ™‚é–“ | 1æ™‚é–“ |
| 4 | å¤‰æ›´ç®¡ç† | 4æ™‚é–“ | 2æ™‚é–“ |
| 5 | ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ | 8æ™‚é–“ | 24æ™‚é–“ |

### 9.2 ç½å®³å¾©æ—§æ‰‹é †

```bash
#!/bin/bash
# /opt/itsm-system/scripts/disaster-recovery.sh

echo "=== Disaster Recovery Procedure Started ==="

# 1. è¢«å®³çŠ¶æ³ç¢ºèª
echo "[1] Checking system status..."
./health-check.sh > /tmp/dr_status.log

# 2. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©æ—§åˆ¤æ–­
echo "[2] Evaluating recovery options..."
LAST_BACKUP=$(aws s3 ls s3://itsm-backup/postgres/full/ | tail -1 | awk '{print $4}')
echo "Latest backup: $LAST_BACKUP"

# 3. å¾©æ—§ç’°å¢ƒæº–å‚™
echo "[3] Preparing recovery environment..."
# æ–°è¦ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ï¼ˆå¿…è¦ãªå ´åˆï¼‰
# terraform apply -auto-approve

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¾©æ—§
echo "[4] Restoring database..."
aws s3 cp s3://itsm-backup/postgres/full/$LAST_BACKUP /tmp/
./restore-db.sh /tmp/$LAST_BACKUP

# 5. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¾©æ—§
echo "[5] Restoring application..."
docker-compose pull
docker-compose up -d

# 6. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºèª
echo "[6] Verifying data integrity..."
./data-integrity-check.sh

# 7. ã‚µãƒ¼ãƒ“ã‚¹å¾©æ—§ç¢ºèª
echo "[7] Service recovery verification..."
./post-recovery-test.sh

echo "=== Disaster Recovery Completed ==="
```

### 9.3 å¾©æ—§å¾Œã®ç¢ºèªé …ç›®

- [ ] ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒæ­£å¸¸ã«èµ·å‹•ã—ã¦ã„ã‚‹
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ•´åˆæ€§ãŒä¿ãŸã‚Œã¦ã„ã‚‹
- [ ] èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹
- [ ] ä¸»è¦æ©Ÿèƒ½ï¼ˆã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆä½œæˆã€æ›´æ–°ï¼‰ãŒå‹•ä½œã™ã‚‹
- [ ] å¤–éƒ¨é€£æºãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè¨±å®¹ç¯„å›²å†…ã§ã‚ã‚‹
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šãŒé©åˆ‡ã§ã‚ã‚‹
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¸ãƒ§ãƒ–ãŒå†é–‹ã•ã‚Œã¦ã„ã‚‹

## 10. é‹ç”¨æ”¹å–„

### 10.1 KPIç®¡ç†

| KPI | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• | æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|-----|--------|----------|---------------|
| ã‚·ã‚¹ãƒ†ãƒ å¯ç”¨æ€§ | 99.9% | Prometheusãƒ¡ãƒˆãƒªã‚¯ã‚¹ | å†—é•·åŒ–å¼·åŒ– |
| å¹³å‡å¿œç­”æ™‚é–“ | <200ms | APMãƒ„ãƒ¼ãƒ« | ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ– |
| ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè§£æ±ºæ™‚é–“ | <4æ™‚é–“ | ãƒã‚±ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ  | è‡ªå‹•åŒ–æ¨é€² |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆåŠŸç‡ | 100% | ç›£è¦–ãƒ­ã‚° | æ‰‹é †è¦‹ç›´ã— |

### 10.2 ç¶™ç¶šçš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹

```mermaid
graph LR
    A[é‹ç”¨ãƒ‡ãƒ¼ã‚¿åé›†] --> B[åˆ†æãƒ»è©•ä¾¡]
    B --> C[æ”¹å–„æ¡ˆç­–å®š]
    C --> D[å®Ÿæ–½è¨ˆç”»]
    D --> E[å®Ÿæ–½]
    E --> F[åŠ¹æœæ¸¬å®š]
    F --> A
```

### 10.3 æœˆæ¬¡é‹ç”¨ãƒ¬ãƒ“ãƒ¥ãƒ¼

#### ãƒ¬ãƒ“ãƒ¥ãƒ¼é …ç›®
1. **ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆåˆ†æ**
   - ç™ºç”Ÿä»¶æ•°ã¨å‚¾å‘
   - è§£æ±ºæ™‚é–“ã¨æ”¹å–„ç‚¹
   - å†ç™ºé˜²æ­¢ç­–ã®åŠ¹æœ

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ**
   - ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³
   - ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®š
   - æœ€é©åŒ–ã®æ©Ÿä¼š

3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼**
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ
   - è„†å¼±æ€§å¯¾å¿œçŠ¶æ³
   - ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®å¦¥å½“æ€§

4. **æ”¹å–„ææ¡ˆ**
   - è‡ªå‹•åŒ–ã®æ©Ÿä¼š
   - ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„
   - ãƒ„ãƒ¼ãƒ«å°å…¥æ¤œè¨

## ä»˜éŒ²

### A. ç·Šæ€¥é€£çµ¡å…ˆ

| å½¹å‰² | æ‹…å½“è€… | é€£çµ¡å…ˆ | å‚™è€ƒ |
|------|--------|--------|------|
| ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… | å±±ç”°å¤ªéƒ | 090-1234-5678 | ä¸»æ‹…å½“ |
| ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… | éˆ´æœ¨èŠ±å­ | 090-2345-6789 | å‰¯æ‹…å½“ |
| DBA | ä½è—¤æ¬¡éƒ | 090-3456-7890 | DBå°‚é–€ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | é«˜æ©‹ä¸‰éƒ | 090-4567-8901 | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ |
| ãƒ™ãƒ³ãƒ€ãƒ¼ã‚µãƒãƒ¼ãƒˆ | ITSMã‚µãƒãƒ¼ãƒˆ | 0120-xxx-xxx | 24æ™‚é–“å¯¾å¿œ |

### B. é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
/opt/itsm-system/config/
/etc/itsm/

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
/var/log/itsm/
/var/log/postgresql/
/var/log/nginx/

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
/backup/postgres/
/backup/config/

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
/opt/itsm-system/scripts/

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
/opt/itsm-system/docs/
```

### C. ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

```bash
# ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ç¢ºèª
docker-compose ps
systemctl status postgresql

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f backend
tail -f /var/log/itsm/app.log

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
psql -U itsm_user -d itsm_db

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
redis-cli FLUSHALL

# ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ç¢ºèª
df -h
du -sh /* | sort -rh | head -20

# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep itsm
netstat -tuln | grep LISTEN
```